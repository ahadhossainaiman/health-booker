"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[564],{564:function(t,n,e){e.r(n);var i=e(4165),o=e(5861),d=e(9439),l=e(2791),r=e(3321),s=e(6794),c=e(4956),a=e(4971),u=e(5318),v=e(3200),h=e(9434),p=e(456),x=e(3263),m=e(3402),j=(e(5108),e(184));n.default=function(){var t,n=(0,l.useState)([]),e=(0,d.Z)(n,2),f=e[0],b=e[1],g=(0,h.I0)(),k=(0,h.v9)((function(t){return t.root})).loading,Z=(0,p.Z)(localStorage.getItem("token")).userId,I=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g((0,u.K4)(!0)),t.next=4,(0,a.Z)("/appointment/getallappointments?search=".concat(Z));case 4:e=t.sent,b(e),g((0,u.K4)(!1)),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(n){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){I()}),[]);var A=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(n){var e,o,d,l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.ZP.promise(x.Z.put("/appointment/completed",{appointid:null===n||void 0===n?void 0:n._id,doctorId:null===n||void 0===n||null===(e=n.doctorId)||void 0===e?void 0:e._id,doctorname:"".concat(null===n||void 0===n||null===(o=n.userId)||void 0===o?void 0:o.firstname," ").concat(null===n||void 0===n||null===(d=n.userId)||void 0===d?void 0:d.lastname)},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),{success:"Appointment booked successfully",error:"Unable to book appointment",loading:"Booking appointment..."});case 3:l=t.sent,l.data,I(),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(n){return t.apply(this,arguments)}}();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.Z,{}),k?(0,j.jsx)(v.Z,{}):(0,j.jsxs)("section",{className:"container notif-section",children:[(0,j.jsx)("h2",{className:"page-heading",children:"Your Appointments"}),f.length>0?(0,j.jsx)("div",{className:"appointments",children:(0,j.jsxs)("table",{children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"S.No"}),(0,j.jsx)("th",{children:"Doctor"}),(0,j.jsx)("th",{children:"Patient"}),(0,j.jsx)("th",{children:"Appointment Date"}),(0,j.jsx)("th",{children:"Appointment Time"}),(0,j.jsx)("th",{children:"Booking Date"}),(0,j.jsx)("th",{children:"Booking Time"}),(0,j.jsx)("th",{children:"Status"}),Z===(null===(t=f[0].doctorId)||void 0===t?void 0:t._id)?(0,j.jsx)("th",{children:"Action"}):(0,j.jsx)(j.Fragment,{})]})}),(0,j.jsx)("tbody",{children:null===f||void 0===f?void 0:f.map((function(t,n){var e,i,o,d,l;return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:n+1}),(0,j.jsx)("td",{children:(null===t||void 0===t||null===(e=t.doctorId)||void 0===e?void 0:e.firstname)+" "+(null===t||void 0===t||null===(i=t.doctorId)||void 0===i?void 0:i.lastname)}),(0,j.jsx)("td",{children:(null===t||void 0===t||null===(o=t.userId)||void 0===o?void 0:o.firstname)+" "+(null===t||void 0===t||null===(d=t.userId)||void 0===d?void 0:d.lastname)}),(0,j.jsx)("td",{children:null===t||void 0===t?void 0:t.date}),(0,j.jsx)("td",{children:null===t||void 0===t?void 0:t.time}),(0,j.jsx)("td",{children:null===t||void 0===t?void 0:t.createdAt.split("T")[0]}),(0,j.jsx)("td",{children:null===t||void 0===t?void 0:t.updatedAt.split("T")[1].split(".")[0]}),(0,j.jsx)("td",{children:null===t||void 0===t?void 0:t.status}),Z===(null===t||void 0===t||null===(l=t.doctorId)||void 0===l?void 0:l._id)?(0,j.jsx)("td",{children:(0,j.jsx)("button",{className:"btn user-btn accept-btn ".concat("Completed"===(null===t||void 0===t?void 0:t.status)?"disable-btn":""),disabled:"Completed"===(null===t||void 0===t?void 0:t.status),onClick:function(){return A(t)},children:"Complete"})}):(0,j.jsx)(j.Fragment,{})]},null===t||void 0===t?void 0:t._id)}))})]})}):(0,j.jsx)(r.Z,{})]}),(0,j.jsx)(s.Z,{})]})}}}]);
//# sourceMappingURL=564.4ecb1e65.chunk.js.map